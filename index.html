<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="description" content="The most extensive open massively multilingual corpus of datasets for training sentiment models. The corpus consists of 79 manually selected from over 350 datasets reported in the scientific literature based on strict quality criteria and covers 27 languages.">

<title>mms_benchmark - MMS Dataset and Benchmark</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" integrity="sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg==" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==" crossorigin="anonymous"></script>
<script type="application/javascript">define('jquery', [],function() {return window.jQuery;})</script>
<script src="https://unpkg.com/@jupyter-widgets/html-manager@*/dist/embed-amd.js" crossorigin="anonymous"></script>


<link rel="stylesheet" href="styles.css">
<meta property="og:title" content="mms_benchmark - MMS Dataset and Benchmark">
<meta property="og:description" content="The most extensive open massively multilingual corpus of datasets for training sentiment models. The corpus consists of 79 manually selected from over 350 datasets reported in the scientific literature based on strict quality criteria and covers 27 languages.">
<meta property="og:site-name" content="mms_benchmark">
<meta name="twitter:title" content="mms_benchmark - MMS Dataset and Benchmark">
<meta name="twitter:description" content="The most extensive open massively multilingual corpus of datasets for training sentiment models. The corpus consists of 79 manually selected from over 350 datasets reported in the scientific literature based on strict quality criteria and covers 27 languages.">
<meta name="twitter:card" content="summary">
</head>

<body class="nav-sidebar floating nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">mms_benchmark</span>
    </a>
  </div>
        <div class="quarto-navbar-tools ms-auto">
</div>
          <div id="quarto-search" class="" title="Search"></div>
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
      <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./index.html">MMS Dataset and Benchmark</a></li></ol></nav>
      <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
      </a>
    </div>
  </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">MMS Dataset and Benchmark</h1>
                  <div>
        <div class="description">
          The most extensive open massively multilingual corpus of datasets for training sentiment models. The corpus consists of 79 manually selected from over 350 datasets reported in the scientific literature based on strict quality criteria and covers 27 languages.
        </div>
      </div>
                </div>
  </div>
    
  
  <div class="quarto-title-meta">

      
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal sidebar-navigation floating overflow-auto">
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">MMS Dataset and Benchmark</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./dataset_card.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">MMS Dataset Card</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./benchmark_results.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Benchmark results</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./citations.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">MMS Dataset Citations</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./training_example.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">MMS - Example training pipeline</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#dataset" id="toc-dataset" class="nav-link active" data-scroll-target="#dataset">Dataset</a></li>
  <li><a href="#analysis-and-benchmarking" id="toc-analysis-and-benchmarking" class="nav-link" data-scroll-target="#analysis-and-benchmarking">Analysis and benchmarking</a></li>
  <li><a href="#general-statistics-about-the-dataset" id="toc-general-statistics-about-the-dataset" class="nav-link" data-scroll-target="#general-statistics-about-the-dataset">General statistics about the dataset</a></li>
  <li><a href="#features" id="toc-features" class="nav-link" data-scroll-target="#features">Features</a>
  <ul class="collapse">
  <li><a href="#example" id="toc-example" class="nav-link" data-scroll-target="#example">Example</a></li>
  <li><a href="#classes" id="toc-classes" class="nav-link" data-scroll-target="#classes">Classes</a></li>
  <li><a href="#classes-distribution" id="toc-classes-distribution" class="nav-link" data-scroll-target="#classes-distribution">Classes distribution</a></li>
  </ul></li>
  <li><a href="#sentiment-orientation-for-each-language" id="toc-sentiment-orientation-for-each-language" class="nav-link" data-scroll-target="#sentiment-orientation-for-each-language">Sentiment orientation for each language</a></li>
  <li><a href="#per-language" id="toc-per-language" class="nav-link" data-scroll-target="#per-language">Per language</a></li>
  <li><a href="#example-of-filtering-datasets" id="toc-example-of-filtering-datasets" class="nav-link" data-scroll-target="#example-of-filtering-datasets">Example of filtering datasets</a>
  <ul class="collapse">
  <li><a href="#choose-only-polish" id="toc-choose-only-polish" class="nav-link" data-scroll-target="#choose-only-polish">Choose only Polish</a></li>
  </ul></li>
  <li><a href="#use-cases" id="toc-use-cases" class="nav-link" data-scroll-target="#use-cases">Use cases</a>
  <ul class="collapse">
  <li><a href="#case-1" id="toc-case-1" class="nav-link" data-scroll-target="#case-1">Case 1</a></li>
  <li><a href="#case-2" id="toc-case-2" class="nav-link" data-scroll-target="#case-2">Case 2</a></li>
  </ul></li>
  <li><a href="#dataset-curators" id="toc-dataset-curators" class="nav-link" data-scroll-target="#dataset-curators">Dataset Curators</a></li>
  <li><a href="#citation" id="toc-citation" class="nav-link" data-scroll-target="#citation">Citation</a></li>
  <li><a href="#acknowledgements" id="toc-acknowledgements" class="nav-link" data-scroll-target="#acknowledgements">Acknowledgements</a></li>
  <li><a href="#licensing-information" id="toc-licensing-information" class="nav-link" data-scroll-target="#licensing-information">Licensing Information</a></li>
  </ul>
<div class="toc-actions"><div><i class="bi bi-github"></i></div><div class="action-links"><p><a href="https://github.com/Brand24-AI/mms_benchmark/issues/new" class="toc-action">Report an issue</a></p></div></div></nav>
    </div>
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">




<!-- WARNING: THIS FILE WAS AUTOGENERATED! DO NOT EDIT! -->
<p>Despite impressive advancements in multilingual corpora collection and model training, developing large-scale deployments of multilingual models still presents a significant challenge. This is particularly true for language tasks that are culture-dependent. One such example is the area of multilingual sentiment analysis, where affective markers can be subtle and deeply ensconced in culture.</p>
<p>This work presents the most extensive open massively multilingual corpus of datasets for training sentiment models. The corpus consists of 79 manually selected datasets from over 350 datasets reported in the scientific literature based on strict quality criteria. The corpus covers 27 languages representing 6 language families. Datasets can be queried using several linguistic and functional features. In addition, we present a multi-faceted sentiment classification benchmark summarizing hundreds of experiments conducted on different base models, training objectives, dataset collections, and fine-tuning strategies.</p>
<section id="dataset" class="level2">
<h2 class="anchored" data-anchor-id="dataset">Dataset</h2>
<p><a href="https://huggingface.co/datasets/Brand24/mms">Massively Multilingual Sentiment Datasets</a></p>
</section>
<section id="analysis-and-benchmarking" class="level2">
<h2 class="anchored" data-anchor-id="analysis-and-benchmarking">Analysis and benchmarking</h2>
<p><a href="https://huggingface.co/spaces/Brand24/mms_benchmark">HuggingFace Spaces with Analysis and Benchmark</a></p>
</section>
<section id="general-statistics-about-the-dataset" class="level2">
<h2 class="anchored" data-anchor-id="general-statistics-about-the-dataset">General statistics about the dataset</h2>
<blockquote class="blockquote">
<p>It may take some time to download the dataset and generate train set inside HuggingFace dataset. Please be patient.</p>
</blockquote>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>mms_dataset <span class="op">=</span> datasets.load_dataset(<span class="st">"Brand24/mms"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>mms_dataset_df <span class="op">=</span> mms_dataset[<span class="st">"train"</span>].to_pandas()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>How many examples do we have?</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>mms_dataset.num_rows</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<pre><code>{'train': 6164762}</code></pre>
</div>
</div>
</section>
<section id="features" class="level2">
<h2 class="anchored" data-anchor-id="features">Features</h2>
<p>We provide not only texts and sentiment labels but we assigned many additional dimensions for datasets and languages, hence it is possible to splice and dice them as you want and need.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>mms_dataset[<span class="st">"train"</span>].features</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<pre><code>{'_id': Value(dtype='int32', id=None),
 'text': Value(dtype='string', id=None),
 'label': ClassLabel(names=['negative', 'neutral', 'positive'], id=None),
 'original_dataset': Value(dtype='string', id=None),
 'domain': Value(dtype='string', id=None),
 'language': Value(dtype='string', id=None),
 'Family': Value(dtype='string', id=None),
 'Genus': Value(dtype='string', id=None),
 'Definite articles': Value(dtype='string', id=None),
 'Indefinite articles': Value(dtype='string', id=None),
 'Number of cases': Value(dtype='string', id=None),
 'Order of subject, object, verb': Value(dtype='string', id=None),
 'Negative morphemes': Value(dtype='string', id=None),
 'Polar questions': Value(dtype='string', id=None),
 'Position of negative word wrt SOV': Value(dtype='string', id=None),
 'Prefixing vs suffixing': Value(dtype='string', id=None),
 'Coding of nominal plurality': Value(dtype='string', id=None),
 'Grammatical genders': Value(dtype='string', id=None),
 'cleanlab_self_confidence': Value(dtype='float32', id=None)}</code></pre>
</div>
</div>
<section id="example" class="level3">
<h3 class="anchored" data-anchor-id="example">Example</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>mms_dataset[<span class="st">"train"</span>][<span class="dv">2001000</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<pre><code>{'_id': 2001000,
 'text': 'I was a tomboy and this has such great memories for me. They fit exactly how I remember, PERFECTLY!!',
 'label': 2,
 'original_dataset': 'en_amazon',
 'domain': 'reviews',
 'language': 'en',
 'Family': 'Indo-European',
 'Genus': 'Germanic',
 'Definite articles': 'definite word distinct from demonstrative',
 'Indefinite articles': 'indefinite word distinct from one',
 'Number of cases': '2',
 'Order of subject, object, verb': 'SVO',
 'Negative morphemes': 'negative particle',
 'Polar questions': 'interrogative word order',
 'Position of negative word wrt SOV': 'SNegVO',
 'Prefixing vs suffixing': 'strongly suffixing',
 'Coding of nominal plurality': 'plural suffix',
 'Grammatical genders': 'no grammatical gender',
 'cleanlab_self_confidence': 0.9978116750717163}</code></pre>
</div>
</div>
</section>
<section id="classes" class="level3">
<h3 class="anchored" data-anchor-id="classes">Classes</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>labels <span class="op">=</span> mms_dataset[<span class="st">"train"</span>].features[<span class="st">"label"</span>].names</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>labels</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<pre><code>['negative', 'neutral', 'positive']</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>mms_dataset_df[<span class="st">"label_name"</span>] <span class="op">=</span> mms_dataset_df[<span class="st">"label"</span>].<span class="bu">apply</span>(<span class="kw">lambda</span> x: labels[x])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="classes-distribution" class="level3">
<h3 class="anchored" data-anchor-id="classes-distribution">Classes distribution</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>labels_stats_df <span class="op">=</span> pd.DataFrame(mms_dataset_df.label_name.value_counts())</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>labels_stats_df[<span class="st">"percentage"</span>] <span class="op">=</span> (labels_stats_df[<span class="st">"label_name"</span>] <span class="op">/</span> labels_stats_df[<span class="st">"label_name"</span>].<span class="bu">sum</span>()).<span class="bu">round</span>(<span class="dv">3</span>)</span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>labels_stats_df</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">label_name</th>
<th data-quarto-table-cell-role="th">percentage</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">positive</td>
<td>3494478</td>
<td>0.567</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">neutral</td>
<td>1341354</td>
<td>0.218</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">negative</td>
<td>1328930</td>
<td>0.216</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</section>
</section>
<section id="sentiment-orientation-for-each-language" class="level2">
<h2 class="anchored" data-anchor-id="sentiment-orientation-for-each-language">Sentiment orientation for each language</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>cols <span class="op">=</span> [<span class="st">'language'</span>, <span class="st">'label_name'</span>]</span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>mms_dataset_df[cols].value_counts().to_frame().reset_index().rename(columns<span class="op">=</span>{<span class="dv">0</span>: <span class="st">'count'</span>}).sort_values(by<span class="op">=</span>cols, ascending<span class="op">=</span><span class="va">True</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">language</th>
<th data-quarto-table-cell-role="th">label_name</th>
<th data-quarto-table-cell-role="th">count</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">7</td>
<td>ar</td>
<td>negative</td>
<td>138899</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">4</td>
<td>ar</td>
<td>neutral</td>
<td>192774</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">1</td>
<td>ar</td>
<td>positive</td>
<td>600402</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">53</td>
<td>bg</td>
<td>negative</td>
<td>13930</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">41</td>
<td>bg</td>
<td>neutral</td>
<td>28657</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">...</td>
<td>...</td>
<td>...</td>
<td>...</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">62</td>
<td>ur</td>
<td>neutral</td>
<td>8585</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">67</td>
<td>ur</td>
<td>positive</td>
<td>5836</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">9</td>
<td>zh</td>
<td>negative</td>
<td>117967</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">21</td>
<td>zh</td>
<td>neutral</td>
<td>69016</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">6</td>
<td>zh</td>
<td>positive</td>
<td>144719</td>
</tr>
</tbody>
</table>

<p>81 rows × 3 columns</p>
</div>
</div>
</div>
</section>
<section id="per-language" class="level2">
<h2 class="anchored" data-anchor-id="per-language">Per language</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>cols <span class="op">=</span> [<span class="st">'language'</span>]</span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>mms_dataset_df[cols].value_counts().to_frame().reset_index().rename(columns<span class="op">=</span>{<span class="dv">0</span>: <span class="st">'count'</span>}).sort_values(by<span class="op">=</span>cols, ascending<span class="op">=</span><span class="va">True</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">language</th>
<th data-quarto-table-cell-role="th">count</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">1</td>
<td>ar</td>
<td>932075</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">15</td>
<td>bg</td>
<td>62150</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">20</td>
<td>bs</td>
<td>36183</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">8</td>
<td>cs</td>
<td>196287</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>de</td>
<td>315887</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">0</td>
<td>en</td>
<td>2330486</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>es</td>
<td>418712</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">23</td>
<td>fa</td>
<td>13525</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">6</td>
<td>fr</td>
<td>210631</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">25</td>
<td>he</td>
<td>8619</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">22</td>
<td>hi</td>
<td>16999</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">12</td>
<td>hr</td>
<td>77594</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">16</td>
<td>hu</td>
<td>56682</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">24</td>
<td>it</td>
<td>12065</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">7</td>
<td>ja</td>
<td>209780</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">26</td>
<td>lv</td>
<td>5790</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">5</td>
<td>pl</td>
<td>236688</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">9</td>
<td>pt</td>
<td>157834</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">11</td>
<td>ru</td>
<td>110930</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">17</td>
<td>sk</td>
<td>56623</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">10</td>
<td>sl</td>
<td>113543</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">18</td>
<td>sq</td>
<td>44284</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">13</td>
<td>sr</td>
<td>76368</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">19</td>
<td>sv</td>
<td>41346</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">14</td>
<td>th</td>
<td>72319</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">21</td>
<td>ur</td>
<td>19660</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">3</td>
<td>zh</td>
<td>331702</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</section>
<section id="example-of-filtering-datasets" class="level2">
<h2 class="anchored" data-anchor-id="example-of-filtering-datasets">Example of filtering datasets</h2>
<section id="choose-only-polish" class="level3">
<h3 class="anchored" data-anchor-id="choose-only-polish">Choose only Polish</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>pl <span class="op">=</span> mms_dataset.<span class="bu">filter</span>(<span class="kw">lambda</span> row: row[<span class="st">'language'</span>] <span class="op">==</span> <span class="st">'pl'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<script type="application/vnd.jupyter.widget-view+json">
{"model_id":"741cbcef5c7c406a8e3e49ca9bf2a10f","version_major":2,"version_minor":0,"quarto_mimetype":"application/vnd.jupyter.widget-view+json"}
</script>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>pl[<span class="st">"train"</span>].to_pandas().sample(<span class="dv">5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">_id</th>
<th data-quarto-table-cell-role="th">text</th>
<th data-quarto-table-cell-role="th">label</th>
<th data-quarto-table-cell-role="th">original_dataset</th>
<th data-quarto-table-cell-role="th">domain</th>
<th data-quarto-table-cell-role="th">language</th>
<th data-quarto-table-cell-role="th">Family</th>
<th data-quarto-table-cell-role="th">Genus</th>
<th data-quarto-table-cell-role="th">Definite articles</th>
<th data-quarto-table-cell-role="th">Indefinite articles</th>
<th data-quarto-table-cell-role="th">Number of cases</th>
<th data-quarto-table-cell-role="th">Order of subject, object, verb</th>
<th data-quarto-table-cell-role="th">Negative morphemes</th>
<th data-quarto-table-cell-role="th">Polar questions</th>
<th data-quarto-table-cell-role="th">Position of negative word wrt SOV</th>
<th data-quarto-table-cell-role="th">Prefixing vs suffixing</th>
<th data-quarto-table-cell-role="th">Coding of nominal plurality</th>
<th data-quarto-table-cell-role="th">Grammatical genders</th>
<th data-quarto-table-cell-role="th">cleanlab_self_confidence</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">215921</td>
<td>5119386</td>
<td>Typujcie jaki dziś będzie wynik St.Pats - Legi...</td>
<td>2</td>
<td>pl_twitter_sentiment</td>
<td>social_media</td>
<td>pl</td>
<td>Indo-European</td>
<td>Slavic</td>
<td>no article</td>
<td>no article</td>
<td>6-7</td>
<td>SVO</td>
<td>negative particle</td>
<td>question particle</td>
<td>SNegVO</td>
<td>strongly suffixing</td>
<td>plural suffix</td>
<td>masculine, feminine, neuter</td>
<td>0.589098</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">86525</td>
<td>4989990</td>
<td>@KaczmarSF Przyjemne ciarki mam, gdy patrzę na...</td>
<td>2</td>
<td>pl_twitter_sentiment</td>
<td>social_media</td>
<td>pl</td>
<td>Indo-European</td>
<td>Slavic</td>
<td>no article</td>
<td>no article</td>
<td>6-7</td>
<td>SVO</td>
<td>negative particle</td>
<td>question particle</td>
<td>SNegVO</td>
<td>strongly suffixing</td>
<td>plural suffix</td>
<td>masculine, feminine, neuter</td>
<td>0.950756</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">66031</td>
<td>4969496</td>
<td>szkoda bylo czasu i kasy .</td>
<td>0</td>
<td>pl_polemo</td>
<td>reviews</td>
<td>pl</td>
<td>Indo-European</td>
<td>Slavic</td>
<td>no article</td>
<td>no article</td>
<td>6-7</td>
<td>SVO</td>
<td>negative particle</td>
<td>question particle</td>
<td>SNegVO</td>
<td>strongly suffixing</td>
<td>plural suffix</td>
<td>masculine, feminine, neuter</td>
<td>0.940540</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">137768</td>
<td>5041233</td>
<td>@shinyvalentine mam ja w dupie lecz bylo to kr...</td>
<td>0</td>
<td>pl_twitter_sentiment</td>
<td>social_media</td>
<td>pl</td>
<td>Indo-European</td>
<td>Slavic</td>
<td>no article</td>
<td>no article</td>
<td>6-7</td>
<td>SVO</td>
<td>negative particle</td>
<td>question particle</td>
<td>SNegVO</td>
<td>strongly suffixing</td>
<td>plural suffix</td>
<td>masculine, feminine, neuter</td>
<td>0.220028</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">118766</td>
<td>5022231</td>
<td>@itiNieWracaj pokazują to gdzieś?</td>
<td>2</td>
<td>pl_twitter_sentiment</td>
<td>social_media</td>
<td>pl</td>
<td>Indo-European</td>
<td>Slavic</td>
<td>no article</td>
<td>no article</td>
<td>6-7</td>
<td>SVO</td>
<td>negative particle</td>
<td>question particle</td>
<td>SNegVO</td>
<td>strongly suffixing</td>
<td>plural suffix</td>
<td>masculine, feminine, neuter</td>
<td>0.139179</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</section>
</section>
<section id="use-cases" class="level2">
<h2 class="anchored" data-anchor-id="use-cases">Use cases</h2>
<section id="case-1" class="level3">
<h3 class="anchored" data-anchor-id="case-1">Case 1</h3>
<p>Thus, when training a sentiment classifier using our dataset, one may download different facets of the collection. For instance, one can download all datasets in <code>Slavic</code> languages in which polar questions are formed using the interrogative word order or download all datasets from the <code>Afro-Asiatic</code> language family with no morphological case-making.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>slavic <span class="op">=</span> mms_dataset.<span class="bu">filter</span>(<span class="kw">lambda</span> row: row[<span class="st">"Genus"</span>] <span class="op">==</span> <span class="st">"Slavic"</span> <span class="kw">and</span> row[<span class="st">"Polar questions"</span>] <span class="op">==</span> <span class="st">"interrogative word order"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<script type="application/vnd.jupyter.widget-view+json">
{"model_id":"d507f946e8a742509c483cf43a38ad3b","version_major":2,"version_minor":0,"quarto_mimetype":"application/vnd.jupyter.widget-view+json"}
</script>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>slavic</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<pre><code>DatasetDict({
    train: Dataset({
        features: ['_id', 'text', 'label', 'original_dataset', 'domain', 'language', 'Family', 'Genus', 'Definite articles', 'Indefinite articles', 'Number of cases', 'Order of subject, object, verb', 'Negative morphemes', 'Polar questions', 'Position of negative word wrt SOV', 'Prefixing vs suffixing', 'Coding of nominal plurality', 'Grammatical genders', 'cleanlab_self_confidence'],
        num_rows: 252910
    })
})</code></pre>
</div>
</div>
</section>
<section id="case-2" class="level3">
<h3 class="anchored" data-anchor-id="case-2">Case 2</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>afro_asiatic <span class="op">=</span> mms_dataset.<span class="bu">filter</span>(<span class="kw">lambda</span> row: row[<span class="st">"Family"</span>] <span class="op">==</span> <span class="st">"Afro-Asiatic"</span> <span class="kw">and</span> row[<span class="st">"Number of cases"</span>] <span class="op">==</span> <span class="st">"no morphological case-making"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<script type="application/vnd.jupyter.widget-view+json">
{"model_id":"358b0ccc9c7a4c5da174c2c3aa55e778","version_major":2,"version_minor":0,"quarto_mimetype":"application/vnd.jupyter.widget-view+json"}
</script>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>afro_asiatic</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<pre><code>DatasetDict({
    train: Dataset({
        features: ['_id', 'text', 'label', 'original_dataset', 'domain', 'language', 'Family', 'Genus', 'Definite articles', 'Indefinite articles', 'Number of cases', 'Order of subject, object, verb', 'Negative morphemes', 'Polar questions', 'Position of negative word wrt SOV', 'Prefixing vs suffixing', 'Coding of nominal plurality', 'Grammatical genders', 'cleanlab_self_confidence'],
        num_rows: 8619
    })
})</code></pre>
</div>
</div>
</section>
</section>
<section id="dataset-curators" class="level2">
<h2 class="anchored" data-anchor-id="dataset-curators">Dataset Curators</h2>
<p>The corpus was put together by</p>
<ul>
<li><a href="https://www.linkedin.com/in/lukaszaugustyniak/"><span class="citation" data-cites="laugustyniak">@laugustyniak</span></a></li>
<li><a href="https://www.linkedin.com/in/wscode/"><span class="citation" data-cites="swozniak">@swozniak</span></a></li>
<li><a href="https://www.linkedin.com/in/marcin-gruza-276b2512b/"><span class="citation" data-cites="mgruza">@mgruza</span></a></li>
<li><a href="https://www.linkedin.com/in/piotrgramacki/"><span class="citation" data-cites="pgramacki">@pgramacki</span></a></li>
<li><a href="https://www.linkedin.com/in/krzysztof-rajda/"><span class="citation" data-cites="krajda">@krajda</span></a></li>
<li><a href="https://www.linkedin.com/in/mikolajmorzy/"><span class="citation" data-cites="mmorzy">@mmorzy</span></a></li>
<li><a href="https://www.linkedin.com/in/kajdanowicz/"><span class="citation" data-cites="tkajdanowicz">@tkajdanowicz</span></a></li>
</ul>
</section>
<section id="citation" class="level2">
<h2 class="anchored" data-anchor-id="citation">Citation</h2>
<div class="sourceCode" id="cb23"><pre class="sourceCode bibtex code-with-copy"><code class="sourceCode bibtex"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="va">@misc</span>{<span class="ot">augustyniak2023massively</span>,</span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>      <span class="dt">title</span>={Massively Multilingual Corpus of Sentiment Datasets and Multi-faceted Sentiment Classification Benchmark}, </span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a>      <span class="dt">author</span>={Łukasz Augustyniak and Szymon Woźniak and Marcin Gruza and Piotr Gramacki and Krzysztof Rajda and Mikołaj Morzy and Tomasz Kajdanowicz},</span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a>      <span class="dt">year</span>={2023},</span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a>      <span class="dt">eprint</span>={2306.07902},</span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a>      <span class="dt">archivePrefix</span>={arXiv},</span>
<span id="cb23-7"><a href="#cb23-7" aria-hidden="true" tabindex="-1"></a>      <span class="dt">primaryClass</span>={cs.CL}</span>
<span id="cb23-8"><a href="#cb23-8" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="acknowledgements" class="level2">
<h2 class="anchored" data-anchor-id="acknowledgements">Acknowledgements</h2>
<ul>
<li>BRAND24 - https://brand24.com</li>
<li>CLARIN-PL-Biz - https://clarin.biz</li>
</ul>
</section>
<section id="licensing-information" class="level2">
<h2 class="anchored" data-anchor-id="licensing-information">Licensing Information</h2>
<p>These data are released under this licensing scheme. We do not own any text from which these data and datasets have been extracted.</p>
<p>We license the actual packaging of these data under the Attribution-NonCommercial 4.0 International (CC BY-NC 4.0) https://creativecommons.org/licenses/by-nc/4.0/</p>
<p>This work is published from Poland.</p>
<p>Should you consider that our data contains material that is owned by you and should, therefore not be reproduced here, please: * Clearly identify yourself with detailed contact data such as an address, telephone number, or email address at which you can be contacted. * Clearly identify the copyrighted work claimed to be infringed. * Clearly identify the material claimed to be infringing and the information reasonably sufficient to allow us to locate the material.</p>
<p>We will comply with legitimate requests by removing the affected sources from the next release of the corpus.</p>


</section>

</main> <!-- /main -->
<script type="application/vnd.jupyter.widget-state+json">
{"state":{},"version_major":2,"version_minor":0}
</script>
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>